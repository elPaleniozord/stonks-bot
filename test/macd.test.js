const { MACD } = require('../indicators/macd')
const data = require('./data/klines-15m_2-3-march-2021')
const ticks = data.map(d => d.c)

test('Should properly compute MACD for sample data with default values', () => {
  const macd = MACD(ticks)
  const expectedResult = {"histogram": [24.303539405272204, 275.0746409781664, 248.8173949556757, 89.78781110651352, -143.02708133161417, -310.2128074038691, -329.544432915807, -200.65229887834766, -70.88235167107104, 19.312007284609308, 177.85101197991867, 184.25995345853806, 230.74140730736795, 96.92845354745401, 13.04584827831269, 33.802647271902174, 43.39930126700972, 9.106936796934576, 80.38454393895384, 191.41065580194498, 319.40564866780966, 295.65164247136477, 282.3796532810318, 168.2076597727731, 84.93583414907673, 67.84236570088191, 72.29785257915051, 9.621847785913644, -133.73474411643758, -152.74202684122125, -182.7826844196793, -333.6011716634125, -361.98330783229426, -223.50347006273284, -121.38828331973039, -88.94304856190189, -20.947981911180655, 35.535452515142815, 165.27433221920143, 188.72001543911583, 134.78928423170092, 54.901878080031246, 51.90594046253587, -53.63094107672475, -107.75221041429404, -147.12384333029348, -144.40224166075262, -218.7267528861418, -294.91824535423365, -469.6517298486577, -503.79070402549553, -487.44490042336633, -428.89122755850667, -335.29468281702987, -304.17074598163197, -200.8318715383449, -33.80989220766617, 192.72110783256244, 278.84762195475435, 270.3768692807589, 323.95202148291537, 351.36987609928735, 349.623115845122, 446.0583784018137, 460.26870079804576, 529.5215832510629, 278.15951661484826, 74.67878429941547, -92.76065709776253, -3.856820350642792], "macd": [68.20095353365468, 112.0258890775367, 148.84839882905362, 140.46390780485672, 58.53985543246381, 19.459525042148016, -167.13035777143523], "signal": [230.6104605947321, 225.01166205214162, 236.07465830419562, 271.56190734521925, 294.7299387344296, 321.96808667392077, 316.9831412184229, 293.3970639188051, 276.298218824146, 255.4831379017753, 217.91626700888332, 191.55809513812784, 186.560197154772, 202.60737857672615, 197.79994509183024, 182.64961372093683, 139.23105340646828, 77.3252820868268, 18.919949651529777, -22.343101588918387, -60.63313511424402, -114.67771457667024, -152.7561993582219, -180.94156746694475, -224.28075168099505, -253.34107957289174, -239.0616335096375, -204.2701002387974, -170.0989985787245, -133.28886925243145, -96.80767142779541, -42.36672476675858, 6.931080637764097, 34.419897774485335, 38.88854952887325, 38.442905793432665, 16.494565300774816, -4.658931556712041, -17.097743672331084, -9.246615885522349, -4.158526478691246, -0.37304741080029213, -15.022787743145226, -6.69368534680291, 29.056039856378, 86.49025725329572, 162.63457302906085, 232.37653933135942, 307.7943746810517, 403.3548509423052, 526.2488770658907, 641.6249784908775, 716.4012457010144, 764.4343610612688, 780.6441673710364, 772.5886699433196, 771.6264100643585, 763.6568606658777, 766.5937115235769, 707.7413116557345, 608.5982433392437, 486.0086133559354, 394.77131310118864, 322.20012208618107, 275.494736973149, 247.35110627446113, 223.59839550343793, 186.91871993211035, 149.7055655121187, 79.29758256021783]}
  expect(macd).toEqual(expectedResult)
})