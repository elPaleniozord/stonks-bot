const { STOCH } = require('../indicators/stochastic')
const data = require('./data/klines-15m_2-3-march-2021')

test('Should properly compute Stochastic for sample data with default values', () => {
  const stoch = STOCH(data)
  const expectedResult =       [
    [ undefined, undefined, 0.5106504474972144 ],
    [ undefined, undefined, 0.49515768028248813 ],
    [ 0.5380938568055547, 0.5223233854398014, 0.47139718272209713 ],
    [ 0.5336550217425822, 0.5115913641398638, 0.4412130453286176 ],
    [ 0.4952212777712671, 0.49803659291197805, 0.417562828525617 ],
    [ 0.505897792905742, 0.47584508379562257, 0.41367660597544553 ],
    [ 0.4929907080589248, 0.4403098714586909, 0.43415845267254666 ],
    [ 0.4286467504222008, 0.4074841807315395, 0.4682402688650666 ],
    [ 0.3992921558949468, 0.4048944333866206, 0.4991212840994364 ],
    [ 0.39451363587747085, 0.4286512038081764, 0.5171366488680832 ],
    [ 0.42087750838744403, 0.4689297208228429, 0.5173394136717987 ],
    [ 0.4705624671596141, 0.5071398819641805, 0.508519207455908 ],
    [ 0.5153491869214704, 0.5212942495112859, 0.49931266691942827 ],
    [ 0.535507991811457, 0.5229758151287834, 0.5000901516941533 ],
    [ 0.5130255698009301, 0.5077481763753265, 0.5141996278932462 ],
    [ 0.5203938837739633, 0.49483363086361387, 0.5322231869213795 ],
    [ 0.48982507555108595, 0.4953561935193444, 0.5500455940002099 ],
    [ 0.4742819332657921, 0.5100806306995015, 0.5626727663975793 ],
    [ 0.5219615717411548, 0.5371620594608929, 0.5711275455583226 ],
    [ 0.5339983870915576, 0.5494268706037445, 0.5749217980360616 ],
    [ 0.5555262195499661, 0.5635478519359927, 0.5734039638353337 ],
    [ 0.5587560051697095, 0.5750435766530011, 0.569926661709375 ],
    [ 0.5763613310883019, 0.574791208085974, 0.5624027768794441 ],
    [ 0.5900133937009915, 0.5749306093692099, 0.5477636315417939 ],
    [ 0.5579988994686282, 0.5704900740508173, 0.5344585163188355 ],
    [ 0.5767795349380097, 0.564359301708098, 0.528764239922547 ],
    [ 0.5766917877458135, 0.5523589548794171, 0.5369905378227725 ],
    [ 0.5396065824404704, 0.5265726380378669, 0.542129907200161 ],
    [ 0.5407784944519668, 0.5244439560392228, 0.5386852527185022 ],
    [ 0.49933283722116306, 0.5352761256905517, 0.5306255323312965 ],
    [ 0.5332205364445379, 0.5512515317385436, 0.5287282098295429 ],
    [ 0.5732750034059537, 0.5398620641713878, 0.5359495726282911 ],
    [ 0.5472590553651387, 0.5249421622455755, 0.5504846572714422 ],
    [ 0.4990521337430707, 0.5270723705769266, 0.5729329999459455 ],
    [ 0.528515297628517, 0.5341700966661271, 0.5905975777639769 ],
    [ 0.5536496803591915, 0.5466062506418201, 0.5920533185142701 ],
    [ 0.5203453120106724, 0.5706776245063803, 0.5753097007272711 ],
    [ 0.5658237595555959, 0.601515124689637, 0.5596721819444119 ],
    [ 0.625863801952872, 0.5995999840959144, 0.5557740555330571 ],
    [ 0.6128578125604426, 0.5750448467572598, 0.5602638996555758 ],
    [ 0.5600783377744281, 0.5512842713286398, 0.5649779874424267 ],
    [ 0.5521983899369081, 0.5526874277473373, 0.5641795787184476 ],
    [ 0.5415760862745829, 0.5633504675231954, 0.5656354199204401 ],
    [ 0.5642878070305205, 0.564753803696196, 0.5683282072395331 ],
    [ 0.5841875092644825, 0.5668296911078897, 0.5779768490385752 ],
    [ 0.5457860947935849, 0.5609552413512585, 0.5832591890723595 ],
    [ 0.5705154692656014, 0.5691213273021732, 0.5772901347534386 ],
    [ 0.5665641599945893, 0.5749080530651688, 0.5493921781831643 ],
    [ 0.5702843526463288, 0.5899011667483846, 0.513452492414739 ],
    [ 0.5878756465545879, 0.5849683474035262, 0.48342593796698924 ],
    [ 0.6115435010442367, 0.5570008901084059, 0.4795673175407145 ],
    [ 0.5554858946117536, 0.5062072970375621, 0.48980745064342246 ],
    [ 0.5039732746692274, 0.4771492900982503, 0.5086812651932439 ],
    [ 0.45916272183170515, 0.46692122676515674, 0.5126428293760742 ],
    [ 0.468311873793818, 0.49463143575873786, 0.5062289344448407 ],
    [ 0.4732890846699466, 0.507869689406374, 0.48779944707360284 ],
    [ 0.5422933488124487, 0.5235426704146211, 0.47208562235820617 ],
    [ 0.5080266347367263, 0.5065161283072287, 0.4609986649551419 ],
    [ 0.5203080276946882, 0.4886280046126736, 0.4545696941264954 ],
    [ 0.49121372249027123, 0.46825420830090736, 0.45245313451536817 ],
    [ 0.45436226365306115, 0.4593746541610387, 0.45929243685494026 ],
    [ 0.45918663875938953, 0.4553671324034809, 0.47694827533287415 ],
    [ 0.46457506007066524, 0.4489672958149677, 0.5002222780075462 ],
    [ 0.4423396983803879, 0.453024975327657, 0.5180376501736355 ],
    [ 0.4399871289938497, 0.4758850394221971, 0.5276025607483766 ],
    [ 0.47674809860873335, 0.5019348112487695, 0.5313349452843271 ],
    [ 0.510919890664008, 0.5228469833516728, 0.5289222550321594 ],
    [ 0.518136444473567, 0.5293311559204651, 0.5258770518083361 ],
    [ 0.5394846149174429, 0.530629542972993, 0.5218592410782353 ],
    [ 0.5303724083703851, 0.5340441369595242, 0.526609795032075 ],
    [ 0.5220316056311508, 0.5220930851639616, 0.5335434699129523 ],
    [ 0.5497283968770365, 0.521493933301523, 0.5426455335259991 ],
    [ 0.49451925298369737, 0.5219907047692222, 0.5473275283234473 ],
    [ 0.5202341500438349, 0.5363447470254802, 0.5465699205185243 ],
    [ 0.5512187112801341, 0.5422949579441554, 0.5337621038959339 ],
    [ 0.537581379752471, 0.5492968956083621, 0.5197845594721865 ],
    [ 0.5380847827998607, 0.5503907314178251, 0.5081435368767823 ],
    [ 0.5722245242727545, 0.5400221345293863, 0.5107574380187229 ],
    [ 0.54086288718086, 0.5108734457405909, 0.511225773937242 ],
    [ 0.5069789921345442, 0.508458098146583, 0.5155562553512175 ]
  ]
  expect(stoch).toEqual(expectedResult)
})